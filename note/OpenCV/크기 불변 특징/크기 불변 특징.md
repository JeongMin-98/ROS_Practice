# 크기 불변

> 영상 내에서 찾고자하는 템플릿 객체가 어떤 객체에 의해 가려져있을 경우 인식이 안되는 것을 보완한 방법

코너는 크기 변환에 취약하다 이를 보완하기 위해서는 **다양한 크기 관점**에서 특징 검출이 필요하다.
<br/> 이러한 방법을 **크기 불변 특징**이라고 한다. 

## 특징점
+ 코너와 유사한 특징을 가지고 있음
+ 크기 불변을 만족시키기 위해서 다음과 같은 조건을 구성한다.
  + 스케일 스페이스
  + 이미지 피라미드
+ 위와 같은 것을 구성하여 영상의 크기가 바뀌더라도 반복적으로 검출될 수 있는 특징점을 찾으면 매칭등의 응용할 수 있다.

<br/>

**주요 크기 불변 특징점 알고리즘 **중 가장 유명한것이 **SIFT**이다.

## SIFT
+ Scale Invariant Feature Transform

### SIFT 계산 단계

Detector, Descriptor 단계로 나눠지며 4개의 단계가 2개의 단계씩 묶인다.

<br/> Detector
1. Scale-space extrema detection
2. Keypoint localization

<br/> Descriptor

3. Orientation assignment
4. Keypoint description

#### Scale Space
+ 원본 영상에 대해서 블러링을 반복적으로 수행한다. 원본 영상에서 가로 세로로 반을 줄이고 블러링한 영상 세트를 만든다
+ 두 연속된 영상에 대해서 차연산을 구한다. 


#### keypoint localization(키포인트 찾기)
+ 가우시안 블러된 영상에서 미분을 두번 하여 최댓값과 최솟값을 찾으면된다. 
+ DOG(차연산 연산)의 모든 점에서 local maxima 또는 local minima를 선택한다.

동일 스케일 DOG 영상에서 주변 8개 점과 상/하 스케일 DOG 영상에서 18개 점, 총 26개 점을 비교하여 지역 최솟값 또는 지역 최댓값을 선택한다. 
<br/>
찾은 픽셀 위치에 대해서 서브픽셀 정확도를 구한다. 낮은 대비 극점을 제거하며 에지 성분을 제거한다. 

<br/> 해당 지점들은 크기 변환이나 영상의 모양이 변해도 검출되는 지점이라고 할 수 있다.

#### Orientation assignment(방향 불변 특성을 위한 주 방향 성분 추출)
+ 방향 불변 특성을 위해서 부분 영상에서의 주 방향을 추출한다. 
+ 부분 영상의 모든 픽셀에서 그래디언트 성분을 계산한다. 
+ 방향성분에 대한 히스토 그램을 생성함
+ 희스토그램 최댓값 방향과 최댓값의 80% 이상 크기를 갖는 빈 방향을 키포인트 방향으로 설정한다. 

각 키포인트에 대해 기준 방향 성분을 설정한다. 
+ 각 키포인트는 위치, 스케일, 기준 방향 정보를 가진다. 
+ 크기, 방향에 불변한 특징 벡터를 추출한다. 

#### 키포인트 기술자
+ 각 키포인트 위치에서 스케일과 기준 방향을 고려하여 사각형 영역을 선택한다. 
+ 사각형 영역을 $ 4 \times 4$ 구역으로 분할하고, 각 구역에서 8방향의 방향 성분 히스토그램을 구한다. 

