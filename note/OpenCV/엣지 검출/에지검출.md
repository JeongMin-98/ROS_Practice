# edge detection (에지 검출)

객체의 외곽선, 경계면을 검출하는 것
+ 객체 분할 및 인식을 위한 전처리 과정
+ 영상에서 픽셀의 밝기 값이 급격하게 변하는 부분
+ 가우시안 블러를 적용한다. 

## 영상의 미분
+ 1차 미분의 근사화 
  + 전진 차분
  + 후진 차분
  + 중앙 차분
> 중앙 차분을 이용하는 것이 영상 미분을 제일 잘 나타낸다.

중앙 차분 미분 마스크를 이용하면 x, y에 대한 영상 미분 값을 구할 수 있다.
+ 중앙 차분 마스크 이외에 다양한 에지 검출 마스크가 존재한다. 

### 그래디언트
+ 영상의 그래디언트
  + 함수 f(x,y)를 x축, y축으로 각각 편미분하여 벡터 형태로 표현한것
+ 그래디언트 크기: 픽셀 값의 차이 정도, 변화량
+ 그래디언트 방향: 픽셀 값이 가장 급격하게 증가하는 방향


영상 검출에서는 그래디언트 크기를 이용한다. 
각 성분에 대해서 적정한 임계값을 이용하여 영상을 이진화한다. 


## 에지 검출 마스크

### Prewitt

### Sobel
```cpp
void Sobel( InputArray src, OutputArray dst, int ddepth,
                         int dx, int dy, int ksize = 3,
                         double scale = 1, double delta = 0,
                         int borderType = BORDER_DEFAULT );

```
+ src: 입력 이미지.
+ dst: 출력 영상, src와 같은 크기, 채널
+ ddepth: 출력 영상의 깊이
+ dx, dy: x,y방향으로의 미분 차수
+ ksize: 커널 크기
+ scale,delta: 연산결과에 추가적으로 곱하는 값과 더하는 값. 이 파라미터는 옵션이다.
+ borderType: 가장자리 픽셀 확장 방식

### Scharr
> 소벨 필터보다 더 밝은 이미지 결과를 보여주지만 성능이나 계산적인 측면에서 sobel 만큼 사용되지 못한다. 
## 검출 방법
1. 영상을 x,y 변수의 함수로 간주하였을 때, 이 함수의 1차 미분 값(순간 변화율)이 크게 나타나는 부분을 검출
2. 가우시안 블러를 적용하여 잡음을 제거
3. 미분 값이 Threshold 값보다 큰 경우 에지 픽셀로 검출한다. 
   + Threshold 값을 설정하는 것이 중요
4. 에지 검출 마스크를 사용하여 에지를 검출
